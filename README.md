# job4j_cinema
**Общее описание**

Этот учебный проект реализует УПРОЩЁННЫЙ сайт по покупке билетов в кинотеатр (один кинотеатр, а не сеть, для простоты). Подобные ресурсы имеют много логики. Здесь написаны только:

1. Регистрацию/Вход;
2. Вывод киносеансов и фильмов;
3. Покупку билетов.

Использованы технологии:

Java 17,<br/>
Spring Boot 3.4,<br/>
Thymeleaf 3.4,<br/>
Bootstrap 4.1.3,<br/>
Liquibase 4.15.0,<br/>
Sql2o 1.6.0,<br/>
PostgreSQL 16,<br/>
Junit 5.<br/>


**Техническое задание**

Представления:

1. Главная страница. По аналогии с job4j_dreamjob выводите общую информацию о ресурсе;
2. Расписание. Выводите сеансы и связанные с ними фильмы. При выборе конкретного сеанса пользователь переходит на страницу покупки билета;
3. Кинотека. Выводите список фильмов;
4. Страница покупки билета. Выводите информацию о сеансе и фильм. Также 2 выпадающих списка - один для указания ряда, другой для указания места, и кнопки "Купить", "Отменить";
5. Страница с результатом успешной покупки билета. Выводите, сообщение пользователю, например, "Вы успешно приобрели билет на такое место ...";
6. Страница с результатом неудачной покупки билета (билет уже купили). Выводите, сообщение пользователю, например, "Не удалось приобрести билет на заданное место. Вероятно оно уже занято. Перейдите на страницу бронирования билетов и попробуйте снова.". Реализовать подобный функционал нужно аналогично регистрации пользователя;
7. Страница регистрации. Аналогично job4j_dreamjob;
8. Страница вход. Аналогично job4j_dreamjob.

Навигационная панель:

1. Лого. При клике на него выполняется переход на главную страницу;
2. Расписание. Выводите сеансы и связанные с ними фильмы;
3. Кинотека. Выводите список фильмов, которые показываются в кинотеатре;
4. Регистрация/Вход. Если пользователь не вошел в систему;
5. Имя пользователя/Выйти. Если пользователь вошел в систему.

Разделение прав:

1. Все пользователи имеют право просматривать информацию на сайте;
2. Только зарегистрированные пользователю могут покупать билеты. Если пользователь не зарегистрирован и нажимает на кнопку "Купить билет", то его перебрасывает на страницу входа.

**Нюансы:**

1. Все таблицы кроме таблицы tickets и users заполняются с помощью скриптов SQL. Подобные данные заполняются администратором, а по заданию панель администратора нам писать НЕ нужно;
2. Таблица users имеет ограничение уникальности для email, поэтому при создании пользователя нужно возвращать Optional<User>;
3. Таблица tickets имеет ограничение уникальности unique (session_id, row_number, place_number). При создании билета нужно аналогично возвращать Optional<Ticket>. 

**Задание**

1. Ознакомиться с [требованиями](https://github.com/ShamRail/job4j_requirements/wiki "перейти") к Web-проектам. Проверка будет происходить в соответствии с ними;

2. Создать репозиторий job4j_cinema;

3. Настроить проект. Указать версию Java, зависимости, плагины, профили в pom.xml. Заполнить .gitignore;

4. Создать БД cinema и создать схему db/scripts/001_ddl_create_initial_schema.sql, указанную выше;

5. Заполнить схему (таблицы). Обратите внимание, файлы-постеры нужно скачать предварительно и сохранить в папке files. При вставке данных в таблицу files нужно указать относительный путь к файлам;

6. Настроить Liquibase и с помощью него выполнить скрипты SQL. На текущий момент БД готова;

7. На основе таблиц создать классы модели;

8. Спроектировать интерфейсы репозиториев и реализовать их;

9. Спроектировать интерфейсы сервисов и реализовать их;

10. Реализовать контроллеры;

11. Реализовать фильтры;

12. Реализовать Unit тесты для всех слоев приложения;
