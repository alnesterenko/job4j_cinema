<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:include="fragments/header :: header"></head>
<body>
<div th:replace="fragments/navigation :: navigation"></div>
<div class="container">

    <table class="table">
        <thead>
        <tr>
            <th scope="col">Название фильма</th>
            <th scope="col">Кинозал</th>
            <th scope="col">Начало</th>
            <th scope="col">Завершение</th>
            <th scope="col">Цена</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td th:text="${filmSessionDto.filmName}" />
            <td th:text="${filmSessionDto.hallName}" />
            <!-- Чтобы дата выводилась в "красивом" формате нужно добавить ещё одни скобки -->
            <td th:text="${{filmSessionDto.startTime}}" />
            <td th:text="${{filmSessionDto.endTime}}" />
            <td th:text="${filmSessionDto.price}" />
        </tr>
        </tbody>
    </table>

    <form class="mt-3" th:action="@{/tickets/buy}" th:object="${ticket}" method="post">

        <!--<input type="hidden" th:field="*{userId}" th:value="${user.id}">
        <input type="hidden" th:field="*{sessionId}" th:value="${filmSessionDto.id}">-->
        <input type="hidden"  name="userId" th:value="${user.id}">
        <input type="hidden"  name="sessionId" th:value="${filmSessionDto.id}">
        <div class="mb-3">
            <label for="row"><b>Ряд</b></label>
            <select class="form-control" id="row" name="rowNumber">
                <option th:each="count : ${#numbers.sequence(1, hall.rowCount)}" th:value="${count}" th:text="'ряд № ' + ${count}"></option>
            </select>
        </div>
        <div class="mb-3">
            <label for="place"><b>Место</b></label>
            <select class="form-control" id="place" name="placeNumber">
                <option th:each="count : ${#numbers.sequence(1, hall.placeCount)}" th:value="${count}" th:text="'место № ' + ${count}"></option>
            </select>
        </div>
        <div class="mb-3 row">
            <div class="col-6"></div>
            <div class="col-6">
                <div class="row">
                    <div class="col-6"><a class="btn btn-danger w-100"
                                          th:href="@{/sessions}">Отмена</a></div>
                    <div class="col-6"><button class="btn btn-primary w-100"
                                               type="submit">Купить</button>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>
<div th:include="fragments/footer :: footer"></div>
</body>
</html>